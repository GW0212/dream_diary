*{box-sizing:border-box}
:root{
  --bg:#0a0a0f;
  --bg2:#0d1018;
  --glass:rgba(255,255,255,.06);
  --solid:#0f1324;
  --text:#eef1f7;
  --muted:#b7bfd3;
  --primary:#b9a7ff;
  --accent:#8bd6ff;
  --danger:#ff9bb0;
  --border:#1a2033;
}
html,body{height:100%}
body{
  margin:0;
  background: radial-gradient(1000px 600px at 15% -10%, #11162a 0%, #0b0d15 60%, #090a11 100%);
  color:var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Apple SD Gothic Neo, Helvetica, Arial, sans-serif;
}
.wrap{min-height:100%;display:flex;flex-direction:column}
.hero{padding:48px 16px 8px;text-align:center}
.hero h1{
  margin:0 0 8px 0;
  font-family: 'Noto Serif KR', ui-serif, Georgia, serif;
  font-weight:700;
  letter-spacing:.5px;
  font-size:40px;
}
.subtitle{margin:0;color:var(--muted)}
.main{max-width:860px;margin:0 auto;padding:16px;flex:1;width:100%}
.card{
  background: linear-gradient(180deg, var(--glass), transparent);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 16px;
  box-shadow: 0 20px 60px rgba(0,0,0,.25);
}
.input-card{backdrop-filter: blur(6px) saturate(110%)}
.label{display:flex;flex-direction:column;gap:6px;margin:10px 0}
.input,.textarea,.btn,select{
  border:1px solid #1f2540;
  background:#0f1324;
  color:var(--text);
  border-radius:12px;
  padding:12px 14px;
  outline:none;
  transition:box-shadow .2s ease, border-color .2s ease, transform .06s ease;
}
.input:focus,.textarea:focus,select:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(185,167,255,.25)}
.textarea{resize:vertical}
.actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
.btn{cursor:pointer;color:var(--text)}
.btn:hover{transform:translateY(-1px)}
.btn.primary{background:linear-gradient(90deg, #a290ff, #b9a7ff);border-color:#a290ff;color:#ffffff}
.btn.ghost{background:transparent}
.btn.danger{border-color:var(--danger);color:#ffd6df;background:transparent}
.btn.sm{padding:8px 10px;border-radius:10px;font-size:12px}
.caption{margin:6px 2px 0;color:var(--muted);font-size:12px}

/* Two fixed rows for tags: split into two explicit rows */
.taggrid{display:flex;gap:8px;flex-wrap:wrap}
.chip{
  padding:8px 12px;border-radius:999px;border:1px solid #222a49;background:#0d1224;color:var(--text);
  white-space:nowrap;cursor:pointer;font-size:13px;opacity:.9
}
.chip.active{border-color:#3a4d93;background:#111b3a;opacity:1}
.chip-reset{background:transparent;border:1px solid #2a3152;color:var(--text);border-radius:999px;padding:4px 10px;cursor:pointer;font-size:12px}

.result-head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:6px}
.result-actions{display:flex;gap:6px;flex-wrap:wrap}
.meta{color:var(--muted);font-size:12px}
.excerpt{color:#d8def0}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.block{border:1px dashed #2a3152;border-radius:14px;padding:12px;background:#0b0f1e}
.block h3{margin:0 0 6px 0;font-size:14px;color:#cfd7ff}
.footer{color:var(--muted);text-align:center;padding:24px}

/* Dialogs: add solid backgrounds and dark backdrop to avoid transparency overlap */
dialog{border:none;padding:0;background:transparent}
dialog::backdrop{background: rgba(0,0,0,.55)}
.modal{width:min(860px, calc(100vw - 24px));max-height:min(82vh, 760px);overflow:auto;margin:auto;border:1px solid var(--border);border-radius:18px;padding:12px}
.modal.solid{background: var(--solid)}
.modal-head{display:flex;align-items:center;gap:8px;justify-content:space-between;padding:6px 4px 10px 4px}
.iconbtn{background:transparent;border:1px solid #2a3152;color:var(--text);border-radius:10px;padding:6px 10px;cursor:pointer}
.modal-controls{display:flex;gap:8px;flex-wrap:wrap;padding:6px 0 10px 0}
.list{display:flex;flex-direction:column;gap:8px;padding-bottom:12px}
.row{display:flex;align-items:center;justify-content:space-between;gap:10px;border:1px solid #202746;border-radius:12px;padding:10px 12px;background:#0c1020}
.row-title{font-weight:600}
.row-meta{font-size:12px;color:var(--muted)}
.empty{color:var(--muted);text-align:center;padding:16px}

@media (max-width: 780px){
  .grid2{grid-template-columns:1fr}
  .hero h1{font-size:36px}
}

.input::placeholder,.textarea::placeholder{color:rgba(238,241,247,.7)}

/* === High-contrast overrides === */
:root{ --text-hi:#f5f8ff; --text-med:#e6ebff; --text-dim:#dfe6ff; }
body, .card, .modal, .result-card { color: var(--text-hi); }
.result-card p, .block p, .excerpt, .meta { color: var(--text-med); }
h1,h2,h3,h4,label,.row-title { color:#ffffff !important; }

/* Inputs & placeholders */
.input, .textarea, select { color:#ffffff !important; background:#0f1324; }
.input::placeholder, .textarea::placeholder { color:rgba(255,255,255,.78) !important; }

/* Buttons */
.btn, .btn.ghost, .btn.primary, .iconbtn { color:#ffffff !important; }
.btn.primary{ background:linear-gradient(90deg, #9e8bff, #c4b8ff); border-color:#a997ff; }

/* Blocks */
.block{ background:#0b0f1e; border-color:#38406a; }
.block h3{ color:#ffffff; }

/* === Stronger borders for clean separation === */
.result-card{ border:1px solid #384677 !important; }
.grid2 .block{
  border:1.2px solid #4a5a96 !important;
  background:#0b1022 !important;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
}
.excerpt{ border:1px solid #303c6b; padding:12px; border-radius:12px; background:#0b1020; }
.meta{ padding:2px 0; }

/* === Added consistent borders for input fields on main form === */
.form .label, .input, .textarea {
  border: 1px solid #384677 !important;
  border-radius: 12px;
  background:#0b1022 !important;
}
.label span, .label input, .label textarea, .label select {
  color:#f5f8ff !important;
}

/* === Refined border color harmony and clean alignment === */
:root {
  --border-soft:#1d2238;
  --border-accent:#2a314d;
  --bg-panel:#0d1120;
}

/* Unified card look for form sections */
.form .label, .input, .textarea {
  border:1px solid var(--border-soft) !important;
  border-radius:10px;
  background:var(--bg-panel) !important;
  box-shadow:inset 0 0 3px rgba(255,255,255,0.04);
}

/* Make tag box and section group look cohesive */
.label {
  border:1px solid var(--border-accent);
  background:var(--bg-panel);
  padding:10px 14px;
  border-radius:10px;
}
.label span {font-weight:600; color:#e8ecff;}
.taggrid {margin-top:6px;}
.input, .textarea {width:100%;}

.card.input-card {
  border:1px solid var(--border-accent);
  background:rgba(16,20,36,0.85);
  backdrop-filter:blur(6px);
  box-shadow:0 6px 18px rgba(0,0,0,0.4);
}

/* Smoother section spacing */
.form .label + .label {margin-top:14px;}
.actions{margin-top:18px;}

/* Harmonized result card borders */
.result-card, .block, .excerpt {
  border:1px solid var(--border-accent) !important;
  border-radius:12px;
}
.block {background:var(--bg-panel);}
.excerpt {background:var(--bg-panel);padding:12px;}

/* Tag chips: slightly brighter edges for clarity */
.chip {
  border-color:var(--border-accent);
  background:linear-gradient(180deg, #0f1324, #0d1120);
}
.chip.active {
  border-color:#3a4a80;
  background:linear-gradient(180deg,#131b34,#0d1120);
}

/* Adjust form caption contrast */
.caption{color:#9ca6c9;}

/* === Unified bright borders for both main and result screens === */
:root {
  --border-unified: rgba(255,255,255,0.25);
  --bg-panel:#0b0f1e;
}

/* Apply to all major containers */
.card.input-card, .result-card, .block, .excerpt, .label, .input, .textarea, .taggrid, .actions {
  border: 1px solid var(--border-unified) !important;
  border-radius: 12px;
}

/* Ensure tag boxes and labels consistent */
.label {
  background: var(--bg-panel);
  padding: 10px 14px;
  margin-top: 14px;
  box-shadow: inset 0 0 3px rgba(255,255,255,0.05);
}

/* Form container visual coherence */
.card.input-card {
  background: rgba(20,24,44,0.9);
  box-shadow: 0 4px 16px rgba(0,0,0,0.4);
  backdrop-filter: blur(6px);
}

/* Result cards with matching border color */
.result-card, .block, .excerpt {
  background: var(--bg-panel);
  box-shadow: 0 4px 16px rgba(0,0,0,0.4);
}

/* Tag chip consistent contrast */
.chip {
  border: 1px solid var(--border-unified);
  background: linear-gradient(180deg, #0f1324, #0b0f1e);
}
.chip.active {
  border-color: rgba(255,255,255,0.4);
  background: linear-gradient(180deg, #131b34, #0d1120);
}

/* Buttons bright edges */
.btn, .iconbtn {
  border: 1px solid rgba(255,255,255,0.3);
}

/* Adjusted text and caption contrast */
.label span, .caption {
  color: #eaefff;
}

/* === Remove borders from tag chips and main buttons === */
.chip, .chip.active {
  border: none !important;
  background: linear-gradient(180deg,#12162a,#0b0f1e);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
}
.btn.primary, .btn.ghost {
  border: none !important;
  box-shadow: 0 0 6px rgba(255,255,255,0.08);
}
.btn.primary {
  background: linear-gradient(90deg, #a794ff, #c8bbff);
  color: #0b0a12 !important;
}
.btn.ghost {
  background: rgba(255,255,255,0.1);
  color: #ffffff !important;
}

/* === Remove outer section borders (around tags & button group) === */
.label.tag-section, .actions {
  border: none !important;
  box-shadow: none !important;
  background: transparent !important;
}

/* Restore button borders for primary and ghost buttons */
.btn.primary, .btn.ghost {
  border: 1px solid rgba(255,255,255,0.3) !important;
  border-radius: 8px;
  transition: all 0.2s ease-in-out;
}
.btn.primary:hover, .btn.ghost:hover {
  transform: scale(1.02);
  box-shadow: 0 0 8px rgba(255,255,255,0.15);
}

/* === Final adjustment for tag area === */

/* Remove outer border for entire tag section container */
.label.tag-section {
  border: none !important;
  background: transparent !important;
  box-shadow: none !important;
  padding: 0;
}

/* Restore tag chip individual borders */
.chip {
  border: 1px solid rgba(255,255,255,0.25) !important;
  border-radius: 20px;
  background: linear-gradient(180deg,#12162a,#0b0f1e);
  padding: 6px 14px;
  color: #f2f4ff;
  transition: all 0.15s ease-in-out;
}
.chip:hover {
  background: linear-gradient(180deg,#1a1f38,#10142b);
  transform: scale(1.05);
}
.chip.active {
  border-color: rgba(255,255,255,0.45) !important;
  background: linear-gradient(180deg,#202a55,#14192d);
  color: #ffffff;
}

/* === Remove outer border that wraps all tag chips === */
.taggrid {
  border: none !important;
  background: transparent !important;
  box-shadow: none !important;
  padding: 6px 0 !important;
}

/* Keep chip borders visible */
.chip {
  border: 1px solid rgba(255,255,255,0.25) !important;
  border-radius: 20px;
  background: linear-gradient(180deg,#12162a,#0b0f1e);
  padding: 6px 14px;
  color: #f2f4ff;
}

/* Decorative moon under the title */
.hero-moon{
  margin-top: 6px;
  font-size: 18px;
  opacity: .85;
  filter: drop-shadow(0 0 6px rgba(199,186,255,.35));
}


/* === 달 & 별 배경 효과 추가 === */
body {
  position: relative;
  overflow-x: hidden;
}

/* 별 애니메이션 */
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 200%;
  height: 200%;
  background:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.8) 50%, transparent 60%) repeat,
    radial-gradient(1px 1px at 70% 80%, rgba(255,255,255,0.6) 50%, transparent 60%) repeat,
    radial-gradient(2px 2px at 40% 60%, rgba(255,255,255,0.9) 50%, transparent 60%) repeat;
  background-size: 400px 400px;
  animation: moveStars 60s linear infinite;
  pointer-events: none;
  z-index: 0;
}

/* 달빛 안개 효과 */
body::after {
  content: "";
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle at 70% 20%, rgba(255, 240, 200, 0.1), transparent 60%),
              radial-gradient(circle at 20% 80%, rgba(180, 200, 255, 0.05), transparent 70%);
  pointer-events: none;
  z-index: 0;
  animation: glow 8s ease-in-out infinite alternate;
}

/* 별 움직임 */
@keyframes moveStars {
  from { transform: translate(0, 0); }
  to { transform: translate(-200px, -200px); }
}

/* 달빛 깜빡임 */
@keyframes glow {
  from { opacity: 0.7; }
  to { opacity: 1; }
}

/* 컨텐츠 위에 별/달 배경이 덮이지 않도록 보정 */
.wrap, .hero, .main, .footer, dialog, .modal, .card {
  position: relative;
  z-index: 1;
}


/* === Mobile-only refinements (do not affect desktop) === */
/* 1) 메인 화면 텍스트, 버튼 크기 보정 */
@media (max-width: 768px){
  .hero{ padding: 36px 14px 6px; }
  .hero h1{ font-size: 32px; line-height: 1.2; }
  .subtitle{ font-size: 14px; }

  .main{ padding: 12px; }
  .card{ border-radius: 16px; }

  .label{ gap: 4px; margin: 8px 0; }
  .input, .textarea, select{
    padding: 10px 12px;
    font-size: 14px;
    border-radius: 10px;
  }
  .textarea{ min-height: 120px; }

  .btn{ font-size: 14px; padding: 10px 12px; border-radius: 10px; }
  .btn.sm{ font-size: 12px; padding: 7px 9px; }

  .grid2{ gap: 10px; }
  .block{ padding: 10px; border-radius: 12px; }
}

@media (max-width: 420px){
  .hero h1{ font-size: 28px; }
  .subtitle{ font-size: 13px; }
  .btn{ font-size: 13px; padding: 9px 11px; }
  .btn.sm{ font-size: 11px; padding: 6px 8px; }
  .input, .textarea, select{ font-size: 13px; padding: 9px 10px; }
}

/* 2) 모바일에서 타로 3장 카드가 화면 밖으로 넘어가는 문제 해결 */
/* 타로 영역에 사용될 수 있는 보편적 클래스/ID를 안전하게 타겟팅. 기존 .card 전역에는 영향 없게 스코프 한정 */
@media (max-width: 768px){
  /* 카드 컨테이너가 있을 경우 가로 정렬 간격을 자동계산 */
  #tarot, .tarot, [id*="tarot"]{
    --tarot-gap: 8px;
    --tarot-cols: 3;
    --tarot-card-w: calc((100% - (var(--tarot-gap) * (var(--tarot-cols) - 1))) / var(--tarot-cols));
  }
  /* 흔히 쓰는 카드 그리드 래퍼 */
  #tarot .tarot-cards, .tarot .tarot-cards, [id*="tarot"] .tarot-cards{
    display: flex;
    gap: var(--tarot-gap);
    justify-content: space-between;
    align-items: flex-start;
    flex-wrap: nowrap;
    overflow: visible;
  }
  /* 실제 카드 요소 크기 축소: 세로비는 일반적인 타로 2:3 */
  #tarot .tarot-card, .tarot .tarot-card, [id*="tarot"] .tarot-card{
    width: var(--tarot-card-w);
    aspect-ratio: 2 / 3;
    max-width: 120px;
    border-radius: 14px;
  }
  /* 카드 내부 텍스트가 너무 크지 않도록 */
  #tarot .tarot-card *, .tarot .tarot-card *, [id*="tarot"] .tarot-card *{
    font-size: 90%;
  }
}

@media (max-width: 420px){
  #tarot, .tarot, [id*="tarot"]{ --tarot-gap: 6px; }
  #tarot .tarot-card, .tarot .tarot-card, [id*="tarot"] .tarot-card{
    max-width: 100px;
    border-radius: 12px;
  }
  #tarot .tarot-card *, .tarot .tarot-card *, [id*="tarot"] .tarot-card *{
    font-size: 88%;
  }
}
